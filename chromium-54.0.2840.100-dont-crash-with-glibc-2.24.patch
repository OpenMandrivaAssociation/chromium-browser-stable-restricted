--- chromium-54.0.2840.100/third_party/WebKit/Source/wtf/allocator/PageAllocator.cpp.omv~	2016-11-17 12:57:37.578047725 +0100
+++ chromium-54.0.2840.100/third_party/WebKit/Source/wtf/allocator/PageAllocator.cpp	2016-11-17 12:58:07.651303576 +0100
@@ -242,6 +242,12 @@
   ASSERT(!(len & kSystemPageOffsetMask));
 #if OS(POSIX)
   int ret = madvise(addr, len, MADV_FREE);
+  if (ret != 0 && errno == EINVAL) {
+    // MADV_FREE only works on Linux 4.5+ . If request failed,
+    // retry with older MADV_DONTNEED . Note that MADV_FREE
+    // being defined at compile time doesn't imply runtime support.
+    ret = madvise(addr, len, MADV_DONTNEED);
+  }
   RELEASE_ASSERT(!ret);
 #else
   setSystemPagesInaccessible(addr, len);
